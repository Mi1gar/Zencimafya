<!-- Gizli Mesajlaşma Sistemi -->
<div class="mafia-messaging">
    <div class="messaging-header">
        <span class="header-title">[ GİZLİ İLETİŞİM AĞI ]</span>
        <div class="encryption-status">
            <span class="status-text">[ ŞİFRELEME: AKTİF ]</span>
            <div class="status-indicator"></div>
        </div>
    </div>

    <div class="messaging-container">
        <div class="contacts-list">
            <div class="contact-item active">
                <span class="contact-code">[ KOD-7429 ]</span>
                <span class="contact-status">[ ÇEVRİMİÇİ ]</span>
                <div class="contact-indicator"></div>
            </div>
            <div class="contact-item">
                <span class="contact-code">[ KOD-8135 ]</span>
                <span class="contact-status">[ SON GÖRÜLME: 5 dk önce ]</span>
                <div class="contact-indicator offline"></div>
            </div>
            <div class="contact-item">
                <span class="contact-code">[ KOD-6291 ]</span>
                <span class="contact-status">[ GİZLİ MOD ]</span>
                <div class="contact-indicator hidden"></div>
            </div>
        </div>

        <div class="chat-container">
            <div class="chat-messages">
                <div class="message received">
                    <span class="message-time">[ 23:45:12 ]</span>
                    <span class="message-code">[ KOD-7429 ]</span>
                    <div class="message-content">
                        [ OPERASYON TAMAMLANDI. TÜM KANITLAR İMHA EDİLDİ. ]
                    </div>
                </div>
                <div class="message sent">
                    <span class="message-time">[ 23:45:15 ]</span>
                    <span class="message-code">[ SİZ ]</span>
                    <div class="message-content">
                        [ ONAYLANDI. BÖLGEYİ TERK EDİN. ]
                    </div>
                </div>
                <div class="message system">
                    <span class="message-time">[ 23:45:16 ]</span>
                    <div class="message-content">
                        [ MESAJ ŞİFRELENDİ VE İMHA EDİLDİ ]
                    </div>
                </div>
            </div>

            <div class="message-input">
                <div class="input-wrapper">
                    <input type="text" class="mafia-input" placeholder="[ MESAJINIZI YAZIN... ]">
                    <div class="input-scanner"></div>
                </div>
                <button class="mafia-button send-button">
                    <span class="button-text">[ GÖNDER ]</span>
                    <div class="button-scanner"></div>
                </button>
            </div>
        </div>
    </div>

    <div class="messaging-footer">
        <div class="security-info">
            <span class="info-text">[ SON ŞİFRELEME: <span id="last-encryption"></span> ]</span>
            <span class="info-text">[ KANAL GÜVENLİĞİ: MAXIMUM ]</span>
        </div>
        <div class="auto-destruct">
            <span class="destruct-text">[ OTOMATİK İMHA: 5 dk ]</span>
            <div class="destruct-timer"></div>
        </div>
    </div>
</div>

<style>
.mafia-messaging {
    background: rgba(0, 0, 0, 0.9);
    border: 1px solid var(--mafia-red);
    box-shadow: 0 0 30px rgba(139, 0, 0, 0.3);
    padding: 1.5rem;
    height: 80vh;
    display: flex;
    flex-direction: column;
}

.messaging-header {
    border-bottom: 1px solid var(--mafia-red);
    padding-bottom: 1rem;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.encryption-status {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.status-indicator {
    width: 10px;
    height: 10px;
    background: var(--mafia-red);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--mafia-red);
    animation: pulse 1s infinite;
}

.messaging-container {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 1rem;
    flex: 1;
    overflow: hidden;
}

.contacts-list {
    border-right: 1px solid var(--mafia-red);
    padding-right: 1rem;
    overflow-y: auto;
}

.contact-item {
    padding: 0.8rem;
    margin-bottom: 0.5rem;
    border: 1px solid var(--mafia-red);
    background: rgba(139, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    cursor: pointer;
    transition: all 0.3s;
}

.contact-item:hover {
    background: rgba(139, 0, 0, 0.2);
    box-shadow: 0 0 10px var(--mafia-red);
}

.contact-item.active {
    background: rgba(139, 0, 0, 0.3);
    box-shadow: 0 0 15px var(--mafia-red);
}

.contact-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--mafia-red);
    box-shadow: 0 0 5px var(--mafia-red);
    animation: pulse 1s infinite;
}

.contact-indicator.offline {
    background: #666;
    box-shadow: none;
    animation: none;
}

.contact-indicator.hidden {
    background: var(--mafia-gold);
    box-shadow: 0 0 5px var(--mafia-gold);
}

.chat-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid var(--mafia-red);
}

.message {
    margin-bottom: 1rem;
    padding: 0.8rem;
    border-left: 3px solid var(--mafia-red);
    background: rgba(139, 0, 0, 0.1);
}

.message.received {
    border-left-color: var(--mafia-red);
}

.message.sent {
    border-left-color: var(--mafia-gold);
    margin-left: auto;
    max-width: 80%;
}

.message.system {
    border-left-color: #666;
    font-style: italic;
    text-align: center;
    background: rgba(102, 102, 102, 0.1);
}

.message-time {
    font-size: 0.8rem;
    color: #666;
    margin-right: 1rem;
}

.message-code {
    font-weight: bold;
    color: var(--mafia-gold);
    margin-right: 1rem;
}

.message-input {
    display: flex;
    gap: 1rem;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid var(--mafia-red);
}

.input-wrapper {
    flex: 1;
    position: relative;
}

.send-button {
    width: 120px;
}

.messaging-footer {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--mafia-red);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.security-info {
    display: flex;
    gap: 2rem;
}

.auto-destruct {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.destruct-timer {
    width: 100px;
    height: 4px;
    background: rgba(139, 0, 0, 0.2);
    border: 1px solid var(--mafia-red);
    position: relative;
    overflow: hidden;
}

.destruct-timer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: var(--mafia-red);
    animation: destruct 300s linear;
}

@keyframes destruct {
    0% { width: 100%; }
    100% { width: 0%; }
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
}

@media (max-width: 768px) {
    .messaging-container {
        grid-template-columns: 1fr;
    }
    
    .contacts-list {
        border-right: none;
        border-bottom: 1px solid var(--mafia-red);
        padding-right: 0;
        padding-bottom: 1rem;
        margin-bottom: 1rem;
    }
}
</style>

<script>
// Son şifreleme zamanını güncelle
function updateLastEncryption() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('tr-TR', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false
    });
    document.getElementById('last-encryption').textContent = timeString;
}

// Mesaj gönderme simülasyonu
document.querySelector('.send-button').addEventListener('click', function() {
    const input = document.querySelector('.mafia-input');
    if (input.value.trim()) {
        const messages = document.querySelector('.chat-messages');
        const message = document.createElement('div');
        message.className = 'message sent';
        
        const now = new Date();
        const timeString = now.toLocaleTimeString('tr-TR', {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false
        });
        
        message.innerHTML = `
            <span class="message-time">[ ${timeString} ]</span>
            <span class="message-code">[ SİZ ]</span>
            <div class="message-content">[ ${input.value} ]</div>
        `;
        
        messages.appendChild(message);
        messages.scrollTop = messages.scrollHeight;
        
        // Sistem mesajı
        setTimeout(() => {
            const systemMessage = document.createElement('div');
            systemMessage.className = 'message system';
            systemMessage.innerHTML = `
                <span class="message-time">[ ${timeString} ]</span>
                <div class="message-content">[ MESAJ ŞİFRELENDİ VE İMHA EDİLDİ ]</div>
            `;
            messages.appendChild(systemMessage);
            messages.scrollTop = messages.scrollHeight;
        }, 1000);
        
        input.value = '';
        updateLastEncryption();
    }
});

// İlk yükleme
updateLastEncryption();
setInterval(updateLastEncryption, 60000);
</script> 