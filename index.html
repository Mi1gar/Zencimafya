<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZENCÄ°MAFYA - Ana Sayfa</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/forum.js"></script>
</head>
<body>
    <!-- YÃ¼kleme EkranÄ± -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">SÄ°STEM BAÅLATILIYOR...</div>
    </div>

    <!-- Ana Konteyner -->
    <div id="main-container" class="main-container">
        <!-- Ãœst MenÃ¼ -->
        <header class="header">
            <div class="logo">ZENCÄ°MAFYA</div>
            <nav class="nav">
                <a href="index.html" class="nav-item active">Ana Sayfa</a>
                <a href="forum.html" class="nav-item">Forum</a>
                <a href="#" class="nav-item">Kurallar</a>
                <a href="#" class="nav-item">HakkÄ±nda</a>
            </nav>
            <div class="user-menu">
                <div id="user-info" class="user-info">
                    <img id="user-avatar" src="assets/images/default-avatar.png" alt="Avatar" class="avatar">
                    <span id="username" class="username"></span>
                </div>
                <div class="dropdown-menu">
                    <a href="#" id="profile-link">Profilim</a>
                    <a href="#" id="settings-link">Ayarlar</a>
                    <a href="#" id="logout-link">Ã‡Ä±kÄ±ÅŸ Yap</a>
                </div>
            </div>
        </header>

        <!-- Ana Ä°Ã§erik -->
        <main class="main-content">
            <!-- Kategoriler -->
            <section class="categories-section">
                <h2 class="section-title">Kategoriler</h2>
                <div id="categories-list" class="categories-list">
                    <!-- Kategoriler JavaScript ile doldurulacak -->
                </div>
            </section>

            <!-- Son Konular -->
            <section class="topics-section">
                <h2 class="section-title">Son Konular</h2>
                <div id="topics-list" class="topics-list">
                    <!-- Konular JavaScript ile doldurulacak -->
                </div>
            </section>

            <!-- Ä°statistikler -->
            <section class="stats-section">
                <h2 class="section-title">Forum Ä°statistikleri</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-topics">0</div>
                        <div class="stat-label">Toplam Konu</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-comments">0</div>
                        <div class="stat-label">Toplam Yorum</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-users">0</div>
                        <div class="stat-label">Ãœye SayÄ±sÄ±</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="online-users">0</div>
                        <div class="stat-label">Ã‡evrimiÃ§i</div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Alt Bilgi -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ZENCÄ°MAFYA</h3>
                    <p>GÃ¼venli ve anonim forum platformu</p>
                </div>
                <div class="footer-section">
                    <h3>HÄ±zlÄ± BaÄŸlantÄ±lar</h3>
                    <a href="#">Kurallar</a>
                    <a href="#">Gizlilik PolitikasÄ±</a>
                    <a href="#">Ä°letiÅŸim</a>
                </div>
                <div class="footer-section">
                    <h3>BaÄŸlantÄ± Durumu</h3>
                    <div class="connection-status">
                        <span class="status-dot"></span>
                        <span class="status-text">TOR + VPN AKTÄ°F</span>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 ZENCÄ°MAFYA. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            </div>
        </footer>
    </div>

    <!-- Biz Kimiz? BÃ¶lÃ¼mÃ¼ -->
    <div class="about-section">
        <div class="about-header">
            <h2>Biz Kimiz?</h2>
            <div class="about-badge">Est. 2024</div>
        </div>
        
        <div class="about-content">
            <div class="about-text">
                <p class="about-description">
                    Zencimafya Forum, siber gÃ¼venlik ve etik hack dÃ¼nyasÄ±na adÄ±m atmak isteyenler iÃ§in 
                    gÃ¼venli bir Ã¶ÄŸrenme ve paylaÅŸÄ±m platformudur. AmacÄ±mÄ±z, yeni baÅŸlayanlardan 
                    profesyonellere kadar her seviyeden kullanÄ±cÄ±ya destek olmak ve bilgi paylaÅŸÄ±mÄ±nÄ± 
                    teÅŸvik etmektir.
                </p>
                
                <div class="about-features">
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ”’</span>
                        <h3>GÃ¼venli Ortam</h3>
                        <p>End-to-end ÅŸifreleme ve gÃ¼venli iletiÅŸim protokolleri</p>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“</span>
                        <h3>Ã–ÄŸrenme KaynaÄŸÄ±</h3>
                        <p>DetaylÄ± eÄŸitimler, workshop'lar ve kaynaklar</p>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ¤</span>
                        <h3>Topluluk</h3>
                        <p>Aktif ve destekleyici bir topluluk</p>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-icon">âš¡</span>
                        <h3>GÃ¼ncel Bilgi</h3>
                        <p>SÃ¼rekli gÃ¼ncellenen iÃ§erik ve gÃ¼venlik haberleri</p>
                    </div>
                </div>

                <div class="about-stats">
                    <div class="stat-item">
                        <span class="stat-number">1000+</span>
                        <span class="stat-label">Ãœye</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">5000+</span>
                        <span class="stat-label">Konu</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">Destek</span>
                    </div>
                </div>

                <div class="about-rules">
                    <h3>Topluluk KurallarÄ±</h3>
                    <ul>
                        <li>Etik hack ve siber gÃ¼venlik odaklÄ± iÃ§erik</li>
                        <li>SaygÄ±lÄ± ve yapÄ±cÄ± iletiÅŸim</li>
                        <li>Bilgi paylaÅŸÄ±mÄ± ve iÅŸbirliÄŸi</li>
                        <li>Gizlilik ve gÃ¼venlik Ã¶nceliÄŸi</li>
                    </ul>
                </div>

                <div class="about-join">
                    <h3>Bize KatÄ±lÄ±n</h3>
                    <p>
                        Siber gÃ¼venlik dÃ¼nyasÄ±nda yolculuÄŸunuza bizimle devam edin. 
                        Yeni baÅŸlayanlar iÃ§in Ã¶zel eÄŸitimler, deneyimli Ã¼yeler iÃ§in 
                        ileri dÃ¼zey workshop'lar ve herkes iÃ§in gÃ¼venli bir Ã¶ÄŸrenme 
                        ortamÄ± sunuyoruz.
                    </p>
                    <button class="terminal-button" onclick="window.location.href='register.html'">
                        Hemen KatÄ±l
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', async () => {
            // Token kontrolÃ¼
            if (!auth.isAuthenticated()) {
                window.location.href = 'login.html';
                return;
            }

            // YÃ¼kleme ekranÄ±nÄ± gÃ¶ster
            showLoadingScreen();
            
            try {
                // KullanÄ±cÄ± bilgilerini gÃ¼ncelle
                updateUserInfo();
                
                // Kategorileri yÃ¼kle
                await loadCategories();
                
                // Son konularÄ± yÃ¼kle
                await loadLatestTopics();
                
                // Ä°statistikleri gÃ¼ncelle
                updateStats();
                
                // Event listener'larÄ± ekle
                setupEventListeners();
            } catch (error) {
                console.error('Sayfa yÃ¼kleme hatasÄ±:', error);
                showError('Sayfa yÃ¼klenirken bir hata oluÅŸtu');
            } finally {
                // YÃ¼kleme ekranÄ±nÄ± gizle
                hideLoadingScreen();
            }
        });

        // YÃ¼kleme ekranÄ±nÄ± gÃ¶ster
        function showLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.classList.add('visible');
            }
        }

        // YÃ¼kleme ekranÄ±nÄ± gizle
        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.classList.remove('visible');
            }
        }

        // KullanÄ±cÄ± bilgilerini gÃ¼ncelle
        function updateUserInfo() {
            const user = auth.getCurrentUser();
            if (user) {
                const usernameElement = document.getElementById('username');
                const avatarElement = document.getElementById('user-avatar');
                
                if (usernameElement) {
                    usernameElement.textContent = user.username;
                }
                
                if (avatarElement && user.avatar) {
                    avatarElement.src = user.avatar;
                }
            }
        }

        // Kategorileri yÃ¼kle
        async function loadCategories() {
            const categoriesList = document.getElementById('categories-list');
            if (!categoriesList) return;

            try {
                const categories = forum.getCategories();
                
                categoriesList.innerHTML = categories.map(category => `
                    <div class="category-card" data-id="${category.id}">
                        <div class="category-icon">${category.icon}</div>
                        <div class="category-info">
                            <h3 class="category-name">${category.name}</h3>
                            <p class="category-description">${category.description}</p>
                        </div>
                        <div class="category-stats">
                            <span class="topic-count">${category.topicCount || 0} Konu</span>
                            <span class="comment-count">${category.commentCount || 0} Yorum</span>
                        </div>
                    </div>
                `).join('');

                // Kategori tÄ±klama olaylarÄ±nÄ± ekle
                document.querySelectorAll('.category-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const categoryId = card.dataset.id;
                        window.location.href = `forum.html?category=${categoryId}`;
                    });
                });
            } catch (error) {
                console.error('Kategori yÃ¼kleme hatasÄ±:', error);
                showError('Kategoriler yÃ¼klenirken bir hata oluÅŸtu');
            }
        }

        // Son konularÄ± yÃ¼kle
        async function loadLatestTopics() {
            const topicsList = document.getElementById('topics-list');
            if (!topicsList) return;

            try {
                const topics = forum.getTopics();
                
                topicsList.innerHTML = topics.slice(0, 5).map(topic => `
                    <div class="topic-card" data-id="${topic.id}">
                        <div class="topic-info">
                            <h3 class="topic-title">${topic.title}</h3>
                            <div class="topic-meta">
                                <span class="author">${topic.author.username}</span>
                                <span class="date">${new Date(topic.createdAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                        <div class="topic-stats">
                            <span class="view-count">${topic.viewCount} GÃ¶rÃ¼ntÃ¼lenme</span>
                            <span class="comment-count">${topic.commentCount} Yorum</span>
                        </div>
                    </div>
                `).join('');

                // Konu tÄ±klama olaylarÄ±nÄ± ekle
                document.querySelectorAll('.topic-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const topicId = card.dataset.id;
                        window.location.href = `topic.html?id=${topicId}`;
                    });
                });
            } catch (error) {
                console.error('Konu yÃ¼kleme hatasÄ±:', error);
                showError('Konular yÃ¼klenirken bir hata oluÅŸtu');
            }
        }

        // Ä°statistikleri gÃ¼ncelle
        function updateStats() {
            const topics = forum.getTopics();
            const comments = forum.getComments();
            const users = auth.getUsers();

            document.getElementById('total-topics').textContent = topics.length;
            document.getElementById('total-comments').textContent = comments.length;
            document.getElementById('total-users').textContent = users.length;
            document.getElementById('online-users').textContent = users.filter(u => u.isOnline).length;
        }

        // Event listener'larÄ± ekle
        function setupEventListeners() {
            // Ã‡Ä±kÄ±ÅŸ yapma
            const logoutLink = document.getElementById('logout-link');
            if (logoutLink) {
                logoutLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    auth.logout();
                    window.location.href = 'login.html';
                });
            }

            // Profil sayfasÄ±
            const profileLink = document.getElementById('profile-link');
            if (profileLink) {
                profileLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const user = auth.getCurrentUser();
                    if (user) {
                        window.location.href = `profile.html?id=${user.id}`;
                    }
                });
            }

            // Ayarlar sayfasÄ±
            const settingsLink = document.getElementById('settings-link');
            if (settingsLink) {
                settingsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.location.href = 'settings.html';
                });
            }
        }

        // Hata mesajÄ± gÃ¶ster
        function showError(message) {
            // Hata mesajÄ± gÃ¶sterimi iÃ§in bir modal veya toast eklenebilir
            console.error(message);
            alert(message);
        }
    </script>
</body>
</html> 